var Gniddos={bin:{},home:{},mnt:{},etc:{},dev:{}};function GDGetObj(o,n){o=o.split("/").filter(o=>""!=o);var t=[],e=n||Gniddos;for(var r of o)"."!=r&&(".."!=r?(t.push(e),e=e[r]):r=t.pop());return e}function GDgetPrompt(){return`${world.player.nickname}@${location.hostname}:${Gniddos.etc.cd}$`}function GDWhereis(o){var n=[];for(const t of Gniddos.etc.path){GDGetObj(t)[o]&&n.push(t+"/"+o)}return n}function GDjoinPath(o=".",n="."){var t="/"==o[0]||"/"==n[0]?"/":"",e=[],r=o.split("/").filter(o=>""!=o),i=n.split("/").filter(o=>""!=o);function d(o){".."==o&&e.pop(),".."!=o&&"."!=o&&e.push(o)}if("/"!=n[0])for(const o of r)d(o);for(const o of i)d(o);return t+e.join("/")}function GDcreateLogContext(o,n){var t=console.log;console.log=function(...n){t(o+":",...n)},n(),console.log=t}function GDgetAbsolutePath(o){return"/"!=!o[0]&&(o=GDjoinPath(Gniddos.etc.cd,o)),o}function GDPathExist(o){o=o.split("/").filter(o=>""!=o);var n=Gniddos;for(const t of o){if(void 0===n[t])return!1;n=n[t]}return!0}function GDCall(o){console.log(GDgetPrompt(),o);var n=o.split(" "),t=GDWhereis(n[0]);t.length>0?GDcreateLogContext(n[0],(function(){GDGetObj(t[0])(n)})):console.log("bash: "+n[0]+": command not found")}Gniddos.etc.path=["/bin"],Gniddos.etc.cd="/",Gniddos.bin.whereis=function(o){var n=GDWhereis(o[1]).map(n=>o[1]+":"+n);console.log(n.join("\n"))},Gniddos.bin.bash=function(o){o.length>1&&console.log("Critter Bash alpha 1.0")},cardboard.on("worldCreated",o=>{commandPrefixes.$=function(o){GDCall(o=o.substr(1))},console.log(commandPrefixes)}),cardboard.on("login",o=>{Gniddos.home[o.player.nickname]={},console.log(`\n${location.hostname} login: ${o.player.nickname}`)});var onEvt=cardboard.on.bind(cardboard);["loadScriptClient","loadScriptLogin","loadScriptIndex","loadScriptUnityProgress","loadScriptUnityLoader","loadScriptShowGame","clientConnected","worldCreated","worldSocketCreated","woldStageCreated","worldStageCreated","worldManifestCreated","login","joinRoom"].forEach(o=>{onEvt(o,(function(o,n){function t(o){for(var n=o.constructor.name,t=1;Gniddos.dev[n+t]!=o&&Gniddos.dev[n+t];)t++;n+=t,Gniddos.dev[n]=o,console.log("bash: found device /dev/"+n,o)}o&&t(o),n&&t(n)}))});
Gniddos.bin.echo=function(n){n.shift(),console.log(n.join(" "))},Gniddos.bin.dir=function(n){var t=n.length>1?n[n.length-1]:".";t=GDgetAbsolutePath(t),GDPathExist(t)||console.log(t,"does not exist");var o=GDGetObj(t);console.log(Object.keys(o).join(" "))},Gniddos.bin.cd=function(n){var t=n.length>1?n[n.length-1]:".";t=GDgetAbsolutePath(t),Gniddos.etc.cd=t},Gniddos.bin.help=function(n){Gniddos.etc.path.forEach(n=>Gniddos.bin.dir(["dir",n]))},Gniddos.bin.mount=function(n){if(n.length<3)console.log("Usage: mount DEVICE PLACE");else{var t=GDgetAbsolutePath(n[1]),o=GDgetAbsolutePath(n[2]),i=GDjoinPath(o,".."),e=o.split("/").pop();GDGetObj(i)[e]=GDGetObj(t)}},Gniddos.bin.debug=function(){console.info(Gniddos)},Gniddos.bin.exit=function(){cheerio()},Gniddos.bin.wget=function(n){var t=n[1],o=GDGetObj(GDgetAbsolutePath(".")),i=t.split("/");o[i[i.length-1]]=WEBAPIhttpGet(t)};
cardboard.register("GNIDDOS"),console.log(EventHandler),console.log(cardboard),cardboard.on("worldCreated",e=>{document.getElementById("message").maxLength=1e3,console.log(Gniddos)});
cardboard.register("GNIDDOS"),console.log(EventHandler),console.log(cardboard),cardboard.on("worldCreated",o=>{console.log(Gniddos)});
var commandPrefixes={};cardboard.on("runScriptIndex",()=>{client.World.prototype.message=function(e){var r=!1;for(const a in commandPrefixes)a===(e=e.trim()).substr(0,1)&&(commandPrefixes[a](e),r=!0);r||(this.socket.emit("message",e),this.emit("M",{i:this.player.playerId,n:this.player.nickname,m:e}))}}),cardboard.on("worldCreated",e=>{commandPrefixes["/"]=e.command});
function WEBAPIhttpGet(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText}
//# sourceMappingURL=min-gj.min.js.map
